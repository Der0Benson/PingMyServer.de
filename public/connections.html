<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="/assets/pingmyserverlogo.png" />
    <title>Connections · PingMyServer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700&family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/styles.css" />
    <link rel="stylesheet" href="/assets/connections.css" />
    <link rel="stylesheet" href="/assets/footer.css" />
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">
          <span class="brand-dot"></span>
          <span>PingMyServer</span>
        </div>
        <nav class="side-nav">
          <a href="/app">Monitoring</a>
          <a href="/incidents">Vorfälle</a>
          <a href="/notifications">Benachrichtigungen</a>
          <a class="active" href="/connections">Connections</a>
          <a href="/owner" data-owner-link hidden>Owner Ops</a>
          <a href="/status" target="_blank" rel="noreferrer">Statusseite</a>
        </nav>
        <div class="side-footer">
          <a
            class="user-pill profile-link"
            href="/connections"
            aria-label="Connections und Kontoeinstellungen"
            aria-current="page"
          >
            <span class="avatar small">U</span>
            <span class="muted" id="current-user-email">eingeloggt</span>
          </a>
          <button class="btn ghost" id="logout-btn" type="button">Abmelden</button>
        </div>
      </aside>

      <div class="content">
        <div class="page">
          <div class="crumb">Konto</div>
          <header class="topbar">
            <div class="title-block">
              <div class="logo-dot">
                <span class="logo-inner"></span>
              </div>
              <div>
                <div class="title">Connections & Sicherheit</div>
                <div class="subtitle">Aktive Sitzungen verwalten und Passwort ändern</div>
              </div>
            </div>
            <div class="top-actions">
              <button class="btn ghost" id="refresh-sessions-btn" type="button">Aktualisieren</button>
              <button class="btn ghost" id="revoke-others-btn" type="button">Alle anderen trennen</button>
            </div>
          </header>

          <main class="connections-page">
            <section class="card wide">
              <div class="card-title">App Connections</div>
              <p class="muted sessions-summary" id="app-connections-summary">Lade App Connections...</p>
              <p class="panel-message" id="app-connections-message"></p>
              <div class="app-connections-list" id="app-connections-list">
                <div class="empty-state">
                  <div class="title">Lade Daten...</div>
                  <div class="muted">Bitte kurz warten.</div>
                </div>
              </div>
            </section>

            <section class="card wide">
              <div class="card-title">Aktive Sitzungen</div>
              <p class="muted sessions-summary" id="sessions-summary">Lade aktive Sitzungen...</p>
              <p class="panel-message" id="sessions-message"></p>
              <div class="session-list" id="sessions-list">
                <div class="empty-state">
                  <div class="title">Lade Daten...</div>
                  <div class="muted">Bitte kurz warten.</div>
                </div>
              </div>
            </section>

            <section class="card wide">
              <div class="card-title">Passwort ändern</div>
              <p class="muted" id="password-mode-hint">Aktuelles Passwort ist erforderlich.</p>
              <form id="password-form" class="password-form" novalidate>
                <label for="current-password">
                  <span>Aktuelles Passwort</span>
                  <input
                    id="current-password"
                    type="password"
                    autocomplete="current-password"
                    minlength="10"
                    maxlength="72"
                    required
                  />
                </label>
                <label for="new-password">
                  <span>Neues Passwort</span>
                  <input
                    id="new-password"
                    type="password"
                    autocomplete="new-password"
                    minlength="10"
                    maxlength="72"
                    required
                  />
                </label>
                <label for="repeat-password">
                  <span>Neues Passwort wiederholen</span>
                  <input
                    id="repeat-password"
                    type="password"
                    autocomplete="new-password"
                    minlength="10"
                    maxlength="72"
                    required
                  />
                </label>
                <div class="password-actions">
                  <button class="btn primary" type="submit">Passwort speichern</button>
                </div>
              </form>
              <p class="panel-message" id="password-message"></p>
            </section>

            <section class="card wide danger-card">
              <div class="card-title">Konto löschen</div>
              <p class="muted">Dadurch werden dein Konto, alle Monitore und alle aktiven Sitzungen dauerhaft gelöscht.</p>
              <p class="muted" id="delete-mode-hint">Aktuelles Passwort ist erforderlich.</p>
              <form id="delete-account-form" class="password-form" novalidate>
                <label for="delete-account-password">
                  <span>Aktuelles Passwort</span>
                  <input
                    id="delete-account-password"
                    type="password"
                    autocomplete="current-password"
                    minlength="10"
                    maxlength="72"
                    required
                  />
                </label>
                <div class="password-actions">
                  <button class="btn ghost danger-btn" id="delete-account-btn" type="submit">Konto dauerhaft löschen</button>
                </div>
              </form>
              <p class="panel-message" id="delete-account-message"></p>
            </section>
          </main>

          <footer class="site-footer">
            <span class="site-footer-note">Rechtliches</span>
            <nav class="site-footer-links" aria-label="Rechtliche Navigation">
              <a href="/nutzungsbedingungen">Nutzungsbedingungen</a>
              <a href="/datenschutz">Datenschutz</a>
              <a href="/impressum">Impressum</a>
            </nav>
          </footer>
        </div>
      </div>
    </div>

    <script src="/assets/connections.js"></script>
  </body>
</html>
